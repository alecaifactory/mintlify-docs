---
title: "Channels Architecture"
description: "Sistema de canales de PAME.AI para conectar con aplicaciones externas"
icon: "tower-broadcast"
---

# Channels Architecture

Los **Canales** son la infraestructura central que permite a PAME.AI conectarse con diferentes aplicaciones y servicios, proporcionando acceso controlado a informaci√≥n y funcionalidades externas.

## üåü Caracter√≠sticas Principales

<CardGroup cols={2}>
  <Card title="Control de Permisos Granular" icon="shield-check">
    Sistema de permisos detallado que permite controlar exactamente qu√© datos puede acceder cada canal
  </Card>
  
  <Card title="Arquitectura Extensible" icon="puzzle-piece">
    Dise√±o modular que permite agregar nuevos tipos de canales f√°cilmente
  </Card>
  
  <Card title="Monitoreo en Tiempo Real" icon="chart-line">
    Seguimiento completo de actividades y eventos de cada canal
  </Card>
  
  <Card title="Seguridad Avanzada" icon="lock">
    Encriptaci√≥n end-to-end y validaci√≥n de integridad de datos
  </Card>
</CardGroup>

## üîå Canales Disponibles

### Chrome Extension Channel üåê
Proporciona acceso completo al navegador Chrome con control granular de permisos.

**Capacidades:**
- Acceso a pesta√±as abiertas
- Extracci√≥n de contenido de p√°ginas
- Historial de navegaci√≥n
- Marcadores del usuario
- Inyecci√≥n de scripts
- Capturas de pantalla

**Permisos:**
- `browser:tabs` - Informaci√≥n de pesta√±as
- `browser:content` - Contenido de p√°ginas
- `browser:history` - Historial de navegaci√≥n
- `browser:bookmarks` - Marcadores
- `browser:inject` - Inyecci√≥n de scripts

### Pr√≥ximamente üöß

<AccordionGroup>
  <Accordion title="WhatsApp Channel">
    Integraci√≥n completa con WhatsApp para env√≠o y recepci√≥n de mensajes, gesti√≥n de contactos y automatizaci√≥n de conversaciones.
  </Accordion>
  
  <Accordion title="MCP Server Channel">
    Protocolo de Contexto de Modelo para integraci√≥n con servidores de AI y herramientas de desarrollo.
  </Accordion>
  
  <Accordion title="API Direct Channel">
    Acceso directo a APIs externas con gesti√≥n autom√°tica de autenticaci√≥n y rate limiting.
  </Accordion>
</AccordionGroup>

## üöÄ Inicio R√°pido

### 1. Instalaci√≥n

```bash
npm install @pame-ai/core
```

### 2. Configuraci√≥n B√°sica

<Tabs>
  <Tab title="JavaScript">
    ```javascript
    const ChannelManager = require('@pame-ai/core/channels');
    
    // Crear gestor de canales
    const channelManager = new ChannelManager({
      maxChannels: 10,
      sessionTimeout: 3600000, // 1 hora
      auditEnabled: true
    });
    ```
  </Tab>
  
  <Tab title="TypeScript">
    ```typescript
    import { ChannelManager } from '@pame-ai/core/channels';
    
    // Crear gestor de canales con tipos
    const channelManager = new ChannelManager({
      maxChannels: 10,
      sessionTimeout: 3600000,
      auditEnabled: true
    });
    ```
  </Tab>
</Tabs>

### 3. Registrar Canal Chrome Extension

```javascript
// Registrar canal
await channelManager.registerChannel('my-browser', {
  type: 'chrome-extension',
  permissions: [
    'browser:tabs',
    'browser:content', 
    'browser:history'
  ],
  manifestVersion: 3
});

// Obtener canal
const chromeChannel = channelManager.getChannel('my-browser');
```

### 4. Usar el Canal

```javascript
// Obtener pesta√±as activas
const tabs = await chromeChannel.executeAction('getTabs', {
  active: true
});

// Analizar p√°gina actual
const pageInfo = await chromeChannel.executeAction('getPageInfo', {
  tabId: tabs[0].id
});

console.log('P√°gina actual:', pageInfo.title);
console.log('Contenido:', pageInfo.textContent.substring(0, 200));
```

## üèóÔ∏è Arquitectura del Sistema

```mermaid
graph TB
    CM[Channel Manager] --> CE[Chrome Extension Channel]
    CM --> WA[WhatsApp Channel]
    CM --> MCP[MCP Server Channel]
    CM --> API[API Direct Channel]
    
    CE --> BP[Browser Permissions]
    CE --> CT[Content Scripts]
    CE --> BG[Background Service]
    
    CM --> PS[Permission System]
    CM --> VL[Validation Layer]
    CM --> LOG[Logging System]
    
    PS --> UC[User Consent]
    PS --> AP[Action Permissions]
    PS --> DP[Data Permissions]
```

## üõ°Ô∏è Sistema de Permisos

### Categor√≠as de Permisos

<Tabs>
  <Tab title="B√°sicos">
    - **`read`** - Lectura de informaci√≥n
    - **`write`** - Modificaci√≥n de datos  
    - **`execute`** - Ejecuci√≥n de acciones
  </Tab>
  
  <Tab title="Navegador">
    - **`browser:tabs`** - Acceso a pesta√±as
    - **`browser:content`** - Contenido de p√°ginas
    - **`browser:history`** - Historial de navegaci√≥n
    - **`browser:bookmarks`** - Marcadores
    - **`browser:inject`** - Inyecci√≥n de scripts
  </Tab>
  
  <Tab title="Mensajer√≠a">
    - **`messaging:send`** - Enviar mensajes
    - **`messaging:receive`** - Recibir mensajes
    - **`messaging:contacts`** - Lista de contactos
  </Tab>
  
  <Tab title="Red y Almacenamiento">
    - **`network`** - Conexiones de red
    - **`storage`** - Almacenamiento local
    - **`api:call`** - Llamadas a APIs externas
  </Tab>
</Tabs>

### Flujo de Consentimiento

<Steps>
  <Step title="Solicitud de Permisos">
    El canal solicita permisos espec√≠ficos al registrarse
  </Step>
  
  <Step title="Validaci√≥n del Sistema">
    Se validan los permisos y dependencias autom√°ticamente
  </Step>
  
  <Step title="Consentimiento del Usuario">
    Se presenta al usuario un prompt detallado con los permisos solicitados
    
    <Warning>
    Los permisos sensibles requieren confirmaci√≥n expl√≠cita del usuario
    </Warning>
  </Step>
  
  <Step title="Otorgamiento y Seguimiento">
    Los permisos se otorgan con fecha de expiraci√≥n y se auditan todas las acciones
  </Step>
</Steps>

## üí° Casos de Uso

### An√°lisis de Contenido Web

```javascript
async function analyzeWebContent() {
  const chrome = channelManager.getChannel('browser');
  
  // Obtener p√°gina actual
  const activeTab = await chrome.executeAction('getActiveTab');
  const pageInfo = await chrome.executeAction('getPageInfo', {
    tabId: activeTab.id
  });
  
  // An√°lisis b√°sico
  const analysis = {
    wordCount: pageInfo.textContent.split(' ').length,
    linkCount: pageInfo.links.length,
    imageCount: pageInfo.images.length,
    hasVideo: pageInfo.textContent.includes('video'),
    category: categorizeContent(pageInfo)
  };
  
  return analysis;
}
```

### Automatizaci√≥n de Navegaci√≥n

```javascript
async function automateWebTasks() {
  const chrome = channelManager.getChannel('browser');
  
  // Crear nueva pesta√±a
  const newTab = await chrome.executeAction('createTab', {
    url: 'https://example.com',
    active: true
  });
  
  // Esperar carga y ejecutar script
  await new Promise(resolve => setTimeout(resolve, 2000));
  
  const result = await chrome.executeAction('executeScript', {
    tabId: newTab.id,
    code: `
      // Llenar formulario autom√°ticamente
      const form = document.querySelector('form');
      if (form) {
        const emailInput = form.querySelector('[type="email"]');
        if (emailInput) emailInput.value = 'usuario@ejemplo.com';
      }
      
      // Retornar estado
      ({ success: true, forms: document.forms.length })
    `
  });
  
  return result;
}
```

### Monitoreo de Actividad

```javascript
// Configurar event listeners
chrome.on('data', (data) => {
  switch (data.type) {
    case 'tab_updated':
      console.log('üìÑ Nueva p√°gina:', data.data.url);
      trackPageVisit(data.data);
      break;
      
    case 'navigation_completed':
      console.log('üß≠ Navegaci√≥n completada:', data.data.url);
      analyzeUserBehavior(data.data);
      break;
  }
});
```

## üìä Monitoreo y Estad√≠sticas

### M√©tricas del Canal Manager

```javascript
const stats = channelManager.getStats();

console.log('üìà Estad√≠sticas:');
console.log(`- Canales activos: ${stats.activeChannels}/${stats.totalChannels}`);
console.log(`- Tipos de canales: ${Object.keys(stats.channelTypes).join(', ')}`);
console.log(`- Total permisos: ${stats.totalPermissions}`);
```

### M√©tricas por Canal

```javascript
const channelInfo = chrome.getInfo();

console.log('üîå Estado del canal:');
console.log(`- Estado: ${channelInfo.status}`);
console.log(`- √öltima actividad: ${channelInfo.lastActivity}`);
console.log(`- Permisos: ${channelInfo.permissions.join(', ')}`);
```

## üîß Configuraci√≥n Avanzada

### Configuraci√≥n de Timeouts

```javascript
const channelManager = new ChannelManager({
  maxChannels: 20,
  sessionTimeout: 7200000, // 2 horas
  encryptionEnabled: true,
  auditEnabled: true
});
```

### Configuraci√≥n de Canal Espec√≠fica

```javascript
await channelManager.registerChannel('browser-advanced', {
  type: 'chrome-extension',
  extensionId: 'your-extension-id',
  manifestVersion: 3,
  timeout: 30000,
  retryAttempts: 3,
  permissions: [
    'browser:tabs',
    'browser:content',
    'browser:inject',
    'storage:persistent'
  ]
});
```

## üö® Manejo de Errores

### Errores Comunes

<AccordionGroup>
  <Accordion title="Canal No Encontrado">
    ```javascript
    try {
      const channel = channelManager.getChannel('invalid-id');
    } catch (error) {
      if (error.message.includes('Channel not found')) {
        console.log('‚ùå Canal no registrado');
        // Registrar canal autom√°ticamente
      }
    }
    ```
  </Accordion>
  
  <Accordion title="Permisos Insuficientes">
    ```javascript
    try {
      await channel.executeAction('sensitiveAction');
    } catch (error) {
      if (error.message.includes('Permission denied')) {
        console.log('üö´ Permisos insuficientes');
        // Solicitar permisos adicionales
      }
    }
    ```
  </Accordion>
  
  <Accordion title="Timeout de Conexi√≥n">
    ```javascript
    try {
      await channel.ping();
    } catch (error) {
      if (error.message.includes('timeout')) {
        console.log('‚è∞ Conexi√≥n lenta - reintentando...');
        await channel.attemptReconnect();
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## üìö Recursos Adicionales

<CardGroup cols={2}>
  <Card title="Chrome Extension Guide" href="/channels/chrome-extension" icon="chrome">
    Gu√≠a completa para el canal de Chrome Extension
  </Card>
  
  <Card title="API Reference" href="/api-reference/channels" icon="code">
    Referencia completa de la API de canales
  </Card>
  
  <Card title="Examples" href="/channels/examples" icon="lightbulb">
    Ejemplos pr√°cticos de uso de canales
  </Card>
  
  <Card title="Security Guide" href="/channels/security" icon="shield">
    Gu√≠a de seguridad y mejores pr√°cticas
  </Card>
</CardGroup>

## ‚ö° Pr√≥ximos Pasos

1. **[Instalar y configurar](/channels/installation)** tu primer canal
2. **[Explorar ejemplos](/channels/examples)** de uso pr√°ctico
3. **[Configurar permisos](/channels/permissions)** granulares
4. **[Integrar con tu aplicaci√≥n](/channels/integration)** existente

<Tip>
¬øNecesitas ayuda? √önete a nuestra [comunidad](https://discord.gg/pame-ai) o consulta nuestros [ejemplos en GitHub](https://github.com/ai-factory-llc/pame-ai/tree/main/core/channels/examples).
</Tip> 